<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Валентинка">
    <link rel="apple-touch-icon" href="icon.png">
    <title>Валентинка</title>
    <style>
        /* Общие стили */
        body {
            background: white;
            color: #E3DAC9;
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 0;
            overflow: hidden;
            position: relative;
        }

        .slider {
            position: relative;
            width: 100vw;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .slide {
            position: absolute;
            width: 100vw;
            height: 100vh;
            display: flex;
            font-size: 1.5em;
            opacity: 0;
            transition: opacity 1s;
            visibility: hidden;
        }
        .slide.active {
            opacity: 1;
            visibility: visible;
        }

        /* Слайды с гифками слева */
        .slide:not(.right-align) {
            justify-content: flex-start;
            align-items: flex-start;
        }

        /* Слайды с гифками справа */
        .slide.right-align {
            justify-content: flex-end;
            align-items: flex-end;
        }

        .center-image {
            width: 80%;
            height: 50%;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: left top;
        }

        /* Для слайдов с выравниванием справа */
        .slide.right-align .center-image {
            margin-bottom: 300px;
        }
        .slide:not(.right-align) .center-image {
             margin-top: 300px; /* опустит гифку */
        }
        .heart {
            position: absolute;
            width: 40px;
            height: 40px;
            background-image: url('heart.png');
            background-size: contain;
            background-repeat: no-repeat;
            cursor: pointer;
            transition: transform 0.3s ease;
            will-change: transform, opacity;
        }
        /* Диалоговые окна */
        .dialog-box, .dialog-box2, .dialog-box3 {
            position: absolute;
            width: 90vw;
            max-width: 300px;
            height: auto;
            background-size: 100% 100%;
            background-repeat: no-repeat;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 10px;
            box-sizing: border-box;
            z-index: 10;
            overflow-y: auto;
            max-height: 80vh;
            font-size: 0.8em;
        }
        .dialog-box {
            top: 5%;
            left: 5%;
        }
        .dialog-box2 {
            top: 10%;
            left: 10%;
        }
        .dialog-box3 {
            top: 5%;
            right: 5%;
        }

        /* Пиксельный текст */
        .pixel-text {
            font-family: 'Press Start 2P', cursive;
            font-size: 8px;
            color: black;
            white-space: pre-line;
            overflow: hidden;
            padding: 6px;
            background: transparent;
        }

        /* Анимации */
        @keyframes float {
            0% { transform: translateY(0px); }
            100% { transform: translateY(-10px); }
        }

        @keyframes levitateHeart {
            0% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0); }
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
</head>
<body>
    <audio id="bg-music" loop>
        <source src="forSofa.mp3" type="audio/mpeg">
        Ваш браузер не поддерживает аудио элемент.
    </audio>
    <button onclick="document.getElementById('bg-music').play()">Включить музыку</button>

    <div class="slider">
        <!-- Первый слайд: картинка в формате PNG -->
        <div class="slide active" onclick="nextSlide()">
            <div class="center-image" style="background-image: url('image1.png');"></div>
        </div>

        <!-- Второй слайд: гифка с текстом -->
        <div class="slide" onclick="nextSlide()">
            <div class="center-image" style="background-image: url('gif1.gif');"></div>
            <div class="dialog-box">
                <div class="pixel-text" id="text1"></div>
            </div>
        </div>

        <!-- Третий слайд: гифка -->
        <div class="slide" onclick="nextSlide()">
            <div class="center-image" style="background-image: url('gif2.gif');"></div>
            <div class="dialog-box">
                <div class="pixel-text" id="text2"></div>
            </div>
        </div>

        <!-- Остальные слайды без изменений -->
        <div class="slide" onclick="nextSlide()">
            <div class="center-image" style="background-image: url('gif3.gif');"></div>
            <div class="dialog-box">
                <div class="pixel-text" id="text3"></div>
            </div>
        </div>
        <div class="slide" id="heart-slide">
            <div class="dialog-box">
                <div class="pixel-text" id="text4"></div>
            </div>
        </div>
        <div class="slide" onclick="nextSlide()">
            <div class="center-image" style="background-image: url('gif3.gif');"></div>
            <div class="dialog-box2">
                <div class="pixel-text" id="text5"></div>
            </div>
        </div>
        <!-- Слайды с me.gif и dialog-box3 справа -->
        <div class="slide right-align" onclick="nextSlide()">
            <div class="center-image" style="background-image: url('me.gif');"></div>
            <div class="dialog-box3">
                <div class="pixel-text" id="text6"></div>
            </div>
        </div>
        <div class="slide right-align" onclick="nextSlide()">
            <div class="center-image" style="background-image: url('me.gif');"></div>
            <div class="dialog-box3">
                <div class="pixel-text" id="text7"></div>
            </div>
        </div>
        <div class="slide right-align" onclick="nextSlide()">
            <div class="center-image" style="background-image: url('me.gif');"></div>
            <div class="dialog-box3">
                <div class="pixel-text" id="text8"></div>
            </div>
        </div>
        <div class="slide" onclick="nextSlide()">
            <div class="center-image" style="background-image: url('gif4.gif');"></div>
            <div class="dialog-box2">
                <div class="pixel-text" id="text9"></div>
            </div>
        </div>
        <div class="slide" onclick="nextSlide()">
            <div class="center-image" style="background-image: url('gif5.gif');"></div>
            <div class="dialog-box2">
                <div class="pixel-text" id="text10"></div>
            </div>
        </div>
        <div class="slide" onclick="nextSlide()">
            <div class="center-image" style="background-image: url('gif6.gif');"></div>
            <div class="dialog-box2">
                <div class="pixel-text" id="text11"></div>
            </div>
        </div>
        <div class="slide" onclick="nextSlide()">
            <div class="center-image" style="background-image: url('gif3.gif');"></div>
            <div class="dialog-box2">
                <div class="pixel-text" id="text12"></div>
            </div>
        </div>
        <div class="slide" onclick="nextSlide()">
            <div class="center-image" style="background-image: url('preLast.gif');"></div>
        </div>
        <div class="slide" onclick="nextSlide()">
            <div class="center-image" style="background-image: url('last.gif');"></div>
        </div>
    </div>

    <script>
        let currentSlide = 0;
        const slides = document.querySelectorAll('.slide');
        const audio = document.getElementById('bg-music');
        let collectedHearts = 0;

        // Тексты для каждого слайда
        const texts = [
            "", // Первый слайд без текста
            "О! Это ты суперлюксовая межгалактическая кисонька?\nЯ как раз тебя и ждала! Дай мне секундочку\nиз цветка вылезти",
            "Ох! Неужели и этот день настал?? С праздником тебя ненаглядная!",
            "Мой создатель хотел тебе кое-что сказать… для этого\nнужно пройти небольшую мини игру!",
            "Собери их все!",
            "Хих! Ты справилась, оставлю вас вдвоём на секундочку",
            "Здраствуй! Моя лучезарная и ненаглядная, Софа!",
            "Вот мы с тобой уже знакомы 210 дней, вот ты уже снишься\nмне почти каждый день и твой лик запечатан в моих фантазиях",
            "Бесконечно люблю тебя и мечтаю о встрече... раз о ней заговорили\nне забудь нажать на кнопку внизу, до скорых встреч. xoxo",
            "Как же вы прекрасныыы! Хочу оставить ваши фотографии на память!\nЕго фото у меня уже есть, а твоего нет… Ты не против если я..?",
            "Так и знала, теперь улыбайся!",
            "Выглядишь превосходноооо!! Покажу своему создателю пускай полюбуется,\nон таааак по тебе соскучился,\nты даже не представляешь, днями напролёт о тебе говорит и говорит",
            "Ладно! Мне пора растворятся и отправляться в свой прекрасный мир ноликов и единичек!\nВсего тебе наилучшего суперКошечка!!"
        ];

        // Функция для анимации текста
        function typeText(element, text, speed = 50) {
            let index = 0;
            element.innerHTML = ""; // Очищаем текст перед началом анимации
            const interval = setInterval(() => {
                if (index < text.length) {
                    element.innerHTML += text[index];
                    index++;
                } else {
                    clearInterval(interval);
                }
            }, speed);
        }

        function showSlide(index) {
            slides.forEach((slide, i) => {
                slide.classList.remove('active');
                slide.style.display = 'none';
            });
            slides[index].classList.add('active');
            slides[index].style.display = 'flex';

            // Запускаем анимацию текста для текущего слайда
            const textElement = slides[index].querySelector('.pixel-text');
            if (textElement && texts[index]) {
                typeText(textElement, texts[index]);
            }

            if (index === 4) {
                startHeartsMovement();
            }
        }

        function nextSlide() {
            if (currentSlide === 0) {
                audio.play().catch(error => console.log('Автозапуск музыки запрещен браузером'));
            }
            currentSlide = (currentSlide + 1) % slides.length;
            showSlide(currentSlide);
        }

        function startHeartsMovement() {
            collectedHearts = 0;
            const heartSlide = slides[4];
            heartSlide.innerHTML = '';
            for (let i = 0; i < 6; i++) {
                const heart = createLevitateHeart();
                heartSlide.appendChild(heart);
            }
        }

        function createLevitateHeart() {
            const heart = document.createElement('div');
            heart.classList.add('heart');
            heart.style.left = Math.random() * (window.innerWidth - 40) + 'px';
            heart.style.top = Math.random() * (window.innerHeight - 40) + 'px';
            heart.onclick = function() {
                heart.remove();
                collectedHearts++;
                if (collectedHearts >= 6) {
                    nextSlide();
                }
            };
            heart.style.animation = 'levitateHeart 3s infinite ease-in-out';
            return heart;
        }

        // Инициализация первого слайда
        showSlide(0);
    </script>
</body>
</html>