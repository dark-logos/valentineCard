<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Валентинка">
    <link rel="apple-touch-icon" href="icon.png">
    <title>Валентинка</title>
    <style>
        body {
            background: white;
            color: #E3DAC9;
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 0;
            overflow: hidden;
            position: relative;
        }

        .slider {
            position: relative;
            width: 100vw;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .slide {
            position: absolute;
            width: 100vw;
            height: 100vh;
            display: flex;
            justify-content: flex-start;
            align-items: flex-end;
            font-size: 2em;
            opacity: 0;
            transition: opacity 1s;
            visibility: hidden;
        }
        .slide.active {
            opacity: 1;
            visibility: visible;
        }

        .center-image {
            width: 50%;
            height: 50%;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
        }

        .cat {
            position: absolute;
            width: 100px;
            height: 100px;
            background-size: contain;
            background-repeat: no-repeat;
            animation: float 3s ease-in-out infinite alternate;
        }

        .heart {
            position: absolute;
            width: 40px;
            height: 40px;
            background-image: url('heart.png');
            background-size: contain;
            background-repeat: no-repeat;
            cursor: pointer;
            transition: transform 0.3s ease;
            will-change: transform, opacity;
        }

        /* Пиксельный текст */
        .pixel-text {
            font-family: 'Press Start 2P', cursive; /* Пиксельный шрифт */
            font-size: 9px; /* Размер текста */
            color: black; /* Черный текст */
            /*text-shadow: 2px 2px 0 white; /* Белая тень для читаемости */
            white-space: pre-line; /* Поддержка переноса строк */
            overflow: hidden; /* Скрываем текст до анимации */
            padding: 6px; /* Отступы */
            background: transparent; /* Прозрачный фон */
        }

        /* Анимация появления текста по букве */
        @keyframes typewriter {
            from { width: 0; }
            to { width: 100%; }
        }

        .typewriter {
            display: inline-block;
            overflow: hidden;
            animation: typewriter 5s steps(60) forwards; /* Анимация на 5 секунд */
        }

        /* Контейнер для диалогового окна */
        .dialog-box {
            position: absolute;
            top: 10%;
            left: 10%;
            width: 400px;
            height: auto;
            background-image: url('dialog-box.png');
            background-size: 100% 100%; /* Растянет изображение на всю область */
            background-repeat: no-repeat;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 10px;
            box-sizing: border-box;
        }
        .dialog-box2 {
            position: absolute;
            top: 20%;
            left: 15%;
            width: 450px;
            height: auto;
            background-image: url('dialog-box2.png'); /* Можно использовать другое изображение */
            background-size: 100% 100%;
            background-repeat: no-repeat;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 15px;
            box-sizing: border-box;
        }
        .dialog-box3 {
            position: absolute;
            top: 20%;
            left: 15%;
            width: 450px;
            height: auto;
            background-image: url('dialog-box3.png'); /* Можно использовать другое изображение */
            background-size: 100% 100%;
            background-repeat: no-repeat;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 15px;
            box-sizing: border-box;
        }
        @keyframes float {
            0% { transform: translateY(0px); }
            100% { transform: translateY(-50px); } /*20*/
        }

        @keyframes levitateHeart {
            0% { transform: translateY(0); }
            50% { transform: translateY(-45px); } /*15*/
            100% { transform: translateY(0); }
        }
    </style>
    <!-- Подключаем пиксельный шрифт -->
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
</head>
<body>
    <audio id="bg-music" loop>
        <source src="forSofa.mp3" type="audio/mpeg">
        Ваш браузер не поддерживает аудио элемент.
    </audio>
    
    <div class="slider">
        <!-- Первый слайд: картинка в формате PNG -->
        <div class="slide active" onclick="nextSlide()">
            <div class="center-image" style="background-image: url('image1.png');"></div>
        </div>

        <!-- Второй слайд: гифка с текстом -->
        <div class="slide" onclick="nextSlide()">
            <div class="center-image" style="background-image: url('gif1.gif');"></div>
            <div class="dialog-box">
                <div class="pixel-text">
                    <div class="typewriter">О! Это ты суперлюксовая межгалактическая кисонька?
Я как раз тебя и ждала! Дай мне секундочку 
из цветка вылезти</div>
                </div>
            </div>
        </div>

        <!-- Третий слайд: гифка -->
        <div class="slide" onclick="nextSlide()">
            <div class="center-image" style="background-image: url('gif2.gif');"></div>
            <div class="dialog-box">
                <div class="pixel-text">
                    <div class="typewriter">Ох! Неужели и этот день настал?? С праздником тебя ненаглядная!</div>
                </div>
            </div>
        </div>

        <!-- Остальные слайды без изменений -->
        <div class="slide" onclick="nextSlide()">
            <div class="center-image" style="background-image: url('gif3.gif');"></div>
            <div class="dialog-box">
                <div class="pixel-text">
                    <div class="typewriter">Мой создатель хотел тебе кое-что сказать… для этого
                         нужно пройти небольшую мини игру!
                    </div>
                </div>
            </div>
        </div>
        <div class="slide" id="heart-slide">
            <div class="dialog-box">
                <div class="pixel-text">
                    <div class="typewriter">Собери их все!
                    </div>
                </div>
            </div>
        </div>
        <div class="slide" onclick="nextSlide()"><div class="dialog-box2">
            <div class="pixel-text">
                <div class="typewriter">Хих! Ты справилась, оставлю вас вдвоём на секундочку </div>
            </div>
        </div>
    </div>
    <div class="slide" onclick="nextSlide()">
        <div class="center-image" style="background-image: url('me.gif');"></div>
        <div class="dialog-box3">
            <div class="pixel-text">
                <div class="typewriter">Здраствуй! Моя лучезарная и ненаглядная, Софа!
                </div>
            </div>
        </div>
    </div>
    <div class="slide" onclick="nextSlide()">
        <div class="center-image" style="background-image: url('me.gif');"></div>
        <div class="dialog-box3">
            <div class="pixel-text">
                <div class="typewriter">Вот мы с тобой уже знакомы 210 дней, вот ты уже снишься 
                    мне почти каждый день и твой лик запечатан в моих фантазиях
                </div>
            </div>
        </div>
    </div>
    <div class="slide" onclick="nextSlide()">
        <div class="center-image" style="background-image: url('me.gif');"></div>
        <div class="dialog-box3">
            <div class="pixel-text">
                <div class="typewriter">Бесконечно люблю тебя и мечтаю о встрече... раз о ней заговорили 
                    не забудь нажать на кнопку внизу, до скорых встреч. xoxo
                </div>
            </div>
        </div>
    </div>
            <div class="dialog-box2">
                <div class="pixel-text">
                    <div class="typewriter">Как же вы прекрасныыы! Хочу оставить ваши фотографии на память! 
                        Его фото у меня уже есть, а твоего нет… Ты не против если я..?</div>
                </div>
            </div>
        </div>
        <div class="slide" onclick="nextSlide()">
            <div class="dialog-box2">
                <div class="pixel-text">
                    <div class="typewriter"> Так и знала, теперь улыбайся!  </div>
                </div>
            </div>
        </div>
        <div class="slide" onclick="nextSlide()">
            <div class="dialog-box2">
                <div class="pixel-text">
                    <div class="typewriter"> Выглядишь превосходноооо!! Покажу своему создателю пускай полюбуется, 
                        он таааак по тебе соскучился, 
                        ты даже не представляешь, днями напролёт о тебе говорит и говорит </div>
                </div>
            </div>
        </div>
        <div class="slide" onclick="nextSlide()">
            <div class="dialog-box2">
                <div class="pixel-text">
                    <div class="typewriter">Ладно! Мне пора растворятся и отправляться в свой прекрасный мир ноликов и единичек!
                         Всего тебе наилучшего суперКошечка!!</div>
                </div>
            </div>
        </div>
        <div class="slide" onclick="nextSlide()">
            <div class="center-image" style="background-image: url('preLast.gif');"></div>
        </div>
            <div class="slide" onclick="nextSlide()">
                <div class="center-image" style="background-image: url('last.gif');"></div>
            </div>
    </div>

    <script>
        let currentSlide = 0;
        const slides = document.querySelectorAll('.slide');
        const audio = document.getElementById('bg-music');
        let collectedHearts = 0;

        function showSlide(index) {
            slides.forEach((slide, i) => {
                slide.classList.remove('active');
            });
            slides[index].classList.add('active');

            if (index === 4) {
                startHeartsMovement();
            }
        }

        function nextSlide() {
            if (currentSlide === 0) {
                audio.play().catch(error => console.log('Автозапуск музыки запрещен браузером'));
            }
            currentSlide = (currentSlide + 1) % slides.length;
            showSlide(currentSlide);
        }

        function startHeartsMovement() {
            collectedHearts = 0;
            const heartSlide = slides[4];
            heartSlide.innerHTML = 'Коснись их всех!';
            const fragment = document.createDocumentFragment();
            for (let i = 0; i < 6; i++) {
                const heart = createLevitateHeart();
                fragment.appendChild(heart);
            }
            heartSlide.appendChild(fragment);
        }

        function createLevitateHeart() {
            const heart = document.createElement('div');
            heart.classList.add('heart');
            heart.style.left = Math.random() * (window.innerWidth - 40) + 'px';
            heart.style.top = Math.random() * (window.innerHeight - 40) + 'px';
            heart.onclick = function() {
                heart.remove();
                collectedHearts++;
                if (collectedHearts >= 6) {
                    nextSlide();
                }
            };
            heart.style.animation = 'levitateHeart 3s infinite ease-in-out';
            return heart;
        }
    </script>
</body>
</html>

